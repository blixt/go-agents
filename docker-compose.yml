services:
  agentd:
    build:
      context: ..
      dockerfile: go-agents/Dockerfile
    working_dir: /app/go-agents
    command: ["agentd"]
    ports:
      - "8080:8080"
    env_file:
      - .env

  execd:
    build:
      context: ..
      dockerfile: go-agents/Dockerfile
    working_dir: /app/go-agents
    command: ["bun", "/app/go-agents/exec/execd.ts", "--api-url", "http://agentd:8080", "--parallel", "2"]
    depends_on:
      - agentd
    env_file:
      - .env
